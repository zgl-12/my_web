<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文化遗产与数据可视化</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 确保ECharts正确加载 -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#8B5CF6', // 主色调：紫色（代表文化与创意）
                        secondary: '#EC4899', // 强调色：粉色（代表活力）
                        neutral: '#F9FAFB'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .card-hover {
                @apply transition-all duration-300 hover:shadow-xl hover:-translate-y-1;
            }
            .language-flag {
                @apply w-6 h-6 rounded-full cursor-pointer transition-transform hover:scale-110;
            }
            .news-content-short {
                display: -webkit-box;
                -webkit-line-clamp: 3;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }
            .news-content-full {
                display: block;
            }
        }
    </style>
</head>
<body class="bg-neutral font-sans text-gray-800 min-h-screen flex flex-col">
    <!-- 导航栏 -->
    <nav class="bg-primary text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex flex-wrap justify-between items-center">
            <div class="flex items-center space-x-2 w-full md:w-auto mb-3 md:mb-0">
                <i class="fa fa-university text-2xl"></i>
                <h1 class="text-xl font-bold">文化遗产与数据</h1>
            </div>
            
            <div class="flex flex-wrap items-center justify-between w-full">
                <div class="hidden md:flex space-x-6 mb-3 md:mb-0">
                    <a href="#story" class="hover:text-secondary transition-colors">故事</a>
                    <a href="#news" class="hover:text-secondary transition-colors">古城新闻</a>
                    <a href="#visualization" class="hover:text-secondary transition-colors">数据可视化</a>
                </div>
                
                <button class="md:hidden text-white text-xl ml-auto">
                    <i class="fa fa-bars"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <main class="flex-grow container mx-auto px-4 py-8">
        <!-- 故事部分 -->
        <section id="story" class="mb-16 scroll-mt-20">
            <div class="text-center mb-8">
                <h2 class="text-[clamp(1.8rem,3vw,2.5rem)] font-bold text-primary mb-2">画布上的革命</h2>
                <p class="text-gray-600 italic">一个关于艺术理想与时代使命的故事</p>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6 md:p-8 card-hover">
                <div class="prose max-w-none">
                    <div class="flex flex-col md:flex-row gap-8 items-center mb-6">
                        <div class="md:w-1/3">
                            <img src="https://picsum.photos/seed/art1/600/800" alt="艺术家创作场景" class="rounded-lg shadow-md w-full h-auto">
                        </div>
                        <div class="md:w-2/3">
                            <h3 class="text-xl font-bold mb-3">第一章：梦想的起点</h3>
                            <p>李明出生在一个普通的家庭，从小就对绘画有着浓厚的兴趣。他的父亲是一位工人，母亲是一位教师，他们虽然不懂艺术，但全力支持李明追求自己的梦想。李明在大学选择了艺术专业，他坚信艺术能够触动人心，改变世界。</p>
                        </div>
                    </div>
                    
                    <h3 class="text-xl font-bold mb-3">第二章：现实的挑战</h3>
                    <p>毕业后，李明面临着严峻的现实挑战。艺术市场被商业化侵蚀，许多艺术家为了生存不得不妥协，创作迎合市场的作品。李明的朋友劝他放弃理想，但他坚持自己的艺术理念，不愿意为了金钱而放弃艺术的纯粹。</p>
                    
                    <div class="my-8">
                        <img src="https://picsum.photos/seed/art2/1200/400" alt="艺术展览" class="rounded-lg shadow-md w-full h-auto">
                    </div>
                    
                    <h3 class="text-xl font-bold mb-3">第三章：时代的使命</h3>
                    <p>随着社会的发展，人们开始反思物质主义带来的问题，对精神文化的需求日益增长。李明的作品开始受到关注，他的画作不仅仅是美的展现，更是对时代问题的深刻反思。他用画笔记录下了城市的变迁，农民工的艰辛，以及普通人的喜怒哀乐。</p>
                    
                    <h3 class="text-xl font-bold mb-3">第四章：坚守与创新</h3>
                    <p>李明在坚守艺术理想的过程中，也在不断创新。他尝试将传统绘画技巧与现代元素结合，创作出既具有时代感又不失艺术性的作品。他的画展吸引了越来越多的人，他的影响力逐渐扩大。</p>
                    
                    <h3 class="text-xl font-bold mb-3">第五章：不负时代使命</h3>
                    <p>李明的艺术生涯达到了高峰，他的作品被国内外的博物馆收藏，他本人也获得了多项艺术大奖。但他没有因此而满足，他继续用画笔记录时代，传递正能量。他相信，艺术不仅仅是个人的追求，更是对社会的责任。</p>
                    
                    <div class="flex flex-col md:flex-row gap-8 items-center mt-6">
                        <div class="md:w-2/3">
                            <h3 class="text-xl font-bold mb-3">结局</h3>
                            <p>在一次大型的国际艺术展览上，李明的作品被放在最显眼的位置。他站在自己的作品前，看着络绎不绝的观众，心中充满了满足和自豪。他知道，他不仅坚守了自己的艺术理想，也不负这个时代的使命。他的故事激励着更多的年轻人，去追求梦想，去改变世界。</p>
                        </div>
                        <div class="md:w-1/3">
                            <img src="https://picsum.photos/seed/art3/600/800" alt="国际艺术展览" class="rounded-lg shadow-md w-full h-auto">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 新闻部分 -->
        <section id="news" class="mb-16 scroll-mt-20">
            <div class="text-center mb-8">
                <h2 class="text-[clamp(1.8rem,3vw,2.5rem)] font-bold text-primary mb-2">古城保护新闻</h2>
                <p class="text-gray-600">探索中国历史文化名城的保护与新生</p>
            </div>
            
            <!-- 语言标签页 -->
            <div class="mb-8 border-b border-gray-200">
                <div class="flex overflow-x-auto pb-2 space-x-4 language-tabs">
                    <button class="px-4 py-2 text-primary border-b-2 border-primary font-medium whitespace-nowrap" data-lang="zh">中文</button>
                    <button class="px-4 py-2 text-gray-500 hover:text-primary whitespace-nowrap" data-lang="en">English</button>
                    <button class="px-4 py-2 text-gray-500 hover:text-primary whitespace-nowrap" data-lang="ja">日本語</button>
                    <button class="px-4 py-2 text-gray-500 hover:text-primary whitespace-nowrap" data-lang="de">Deutsch</button>
                    <button class="px-4 py-2 text-gray-500 hover:text-primary whitespace-nowrap" data-lang="fr">Français</button>
                    <button class="px-4 py-2 text-gray-500 hover:text-primary whitespace-nowrap" data-lang="es">Español</button>
                </div>
            </div>
            
            <!-- 新闻内容 -->
            <div class="news-content">
                <!-- 中文新闻 -->
                <div class="language-news active" data-lang="zh">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- 正定新闻 -->
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                            <div class="flex flex-col md:flex-row">
                                <div class="md:w-1/3">
                                    <img src="https://picsum.photos/seed/zhengding/600/800" alt="河北正定古城" class="w-full h-full object-cover">
                                </div>
                                <div class="md:w-2/3 p-6">
                                    <div class="flex justify-between items-start mb-4">
                                        <h3 class="text-xl font-bold text-gray-800">古老韵味触碰现代繁华</h3>
                                        <span class="bg-primary/10 text-primary text-sm px-3 py-1 rounded-full">河北正定</span>
                                    </div>
                                    
                                    <div class="news-content-short mb-4" id="news-content-zh-1">
                                        <p>华灯亮起，河北正定古城更热闹了：五彩灯带映照下，人们或漫步于古城墙上，或欢聚在古街区中，或嬉戏于阳和楼下。古老的韵味触碰现代的繁华，迸发出别样的生机与活力。</p>
                                        <p>夜幕降临，正定古城被灯光点亮，形成了独特的夜景。城墙上的灯光勾勒出古建筑的轮廓，古街区内的灯笼营造出温馨的氛围。阳和楼下，音乐喷泉吸引了众多游客驻足观看。近年来，正定古城在保护的基础上，积极发展旅游业，通过灯光秀、文化活动等方式，让古老的城墙焕发出新的活力。</p>
                                    </div>
                                    
                                    <button class="text-primary hover:text-secondary transition-colors text-sm mt-2 read-more-btn" data-id="zh-1">
                                        查看原文 <i class="fa fa-angle-right ml-1"></i>
                                    </button>
                                    
                                    <p class="text-gray-600 text-sm mt-4"><i class="fa fa-calendar-o mr-1"></i> 2025年7月12日</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 上海新闻 -->
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                            <div class="flex flex-col md:flex-row">
                                <div class="md:w-1/3">
                                    <img src="https://picsum.photos/seed/shanghai/600/800" alt="上海武康大楼" class="w-full h-full object-cover">
                                </div>
                                <div class="md:w-2/3 p-6">
                                    <div class="flex justify-between items-start mb-4">
                                        <h3 class="text-xl font-bold text-gray-800">建筑能阅读 城市有温度</h3>
                                        <span class="bg-primary/10 text-primary text-sm px-3 py-1 rounded-full">上海</span>
                                    </div>
                                    
                                    <div class="news-content-short mb-4" id="news-content-zh-2">
                                        <p>1987年，27岁的葛雅萍嫁进武康大楼。30多年过去，当年的新娘子，如今已是孩子的外婆。"刚嫁到这里时，这些墙都是漏水的，楼里杂乱的电线像蜘蛛网。"</p>
                                        <p>武康大楼始建于1924年，是上海第一座外廊式公寓建筑。近年来，上海市政府对武康大楼进行了全面修缮，保留了建筑的历史风貌，同时改善了居民的生活条件。如今，武康大楼不仅是居民的住所，也成为了上海的文化地标和旅游景点。葛雅萍说："现在的武康大楼不仅外观漂亮，内部设施也很现代化，我们的生活质量提高了很多。"</p>
                                    </div>
                                    
                                    <button class="text-primary hover:text-secondary transition-colors text-sm mt-2 read-more-btn" data-id="zh-2">
                                        查看原文 <i class="fa fa-angle-right ml-1"></i>
                                    </button>
                                    
                                    <p class="text-gray-600 text-sm mt-4"><i class="fa fa-calendar-o mr-1"></i> 2025年7月12日</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 良渚新闻 -->
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                            <div class="flex flex-col md:flex-row">
                                <div class="md:w-1/3">
                                    <img src="https://picsum.photos/seed/liangzhu/600/800" alt="良渚博物院" class="w-full h-full object-cover">
                                </div>
                                <div class="md:w-2/3 p-6">
                                    <div class="flex justify-between items-start mb-4">
                                        <h3 class="text-xl font-bold text-gray-800">"文化大走廊"串珠成链</h3>
                                        <span class="bg-primary/10 text-primary text-sm px-3 py-1 rounded-full">浙江良渚</span>
                                    </div>
                                    
                                    <div class="news-content-short mb-4" id="news-content-zh-3">
                                        <p>漫步浙江杭州良渚博物院，通过AR眼镜，良渚先民5000年前的生活借助科技手段生动呈现在眼前；从良渚博物院出发，来到特色商业市集"玉鸟集"。</p>
                                        <p>良渚文化是中国新石器时代晚期的一支重要文化，距今约5300-4300年。近年来，杭州市政府打造了"良渚文化大走廊"，将良渚博物院、良渚古城遗址公园、玉鸟集等景点串联起来，形成了一条集文化、旅游、商业于一体的特色线路。游客可以在这里感受5000年前良渚文明的魅力，也可以体验现代商业的活力。良渚文化大走廊的建设，不仅促进了当地旅游业的发展，也为文化遗产的保护和传承提供了新的思路。</p>
                                    </div>
                                    
                                    <button class="text-primary hover:text-secondary transition-colors text-sm mt-2 read-more-btn" data-id="zh-3">
                                        查看原文 <i class="fa fa-angle-right ml-1"></i>
                                    </button>
                                    
                                    <p class="text-gray-600 text-sm mt-4"><i class="fa fa-calendar-o mr-1"></i> 2025年7月12日</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 平遥新闻 -->
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                            <div class="flex flex-col md:flex-row">
                                <div class="md:w-1/3">
                                    <img src="https://picsum.photos/seed/pingyao/600/800" alt="山西平遥古城" class="w-full h-full object-cover">
                                </div>
                                <div class="md:w-2/3 p-6">
                                    <div class="flex justify-between items-start mb-4">
                                        <h3 class="text-xl font-bold text-gray-800">"古城里的生活更舒心了"</h3>
                                        <span class="bg-primary/10 text-primary text-sm px-3 py-1 rounded-full">山西平遥</span>
                                    </div>
                                    
                                    <div class="news-content-short mb-4" id="news-content-zh-4">
                                        <p>自迎薰门步行入城，斑驳的老城门、深深的车辙印、厚重的古城墙、精美的雕刻……2.25平方公里的山西平遥古城内保存着300余处文物古迹。</p>
                                        <p>平遥古城是中国保存最为完整的明清古城之一，1997年被列入世界文化遗产名录。近年来，平遥古城在保护文物古迹的同时，也注重改善居民的生活条件。通过改造老旧管网、整治环境卫生、发展特色民宿等措施，古城的面貌焕然一新。当地居民说："现在古城里的环境越来越好了，游客也越来越多，我们的生活也越来越舒心了。"</p>
                                    </div>
                                    
                                    <button class="text-primary hover:text-secondary transition-colors text-sm mt-2 read-more-btn" data-id="zh-4">
                                        查看原文 <i class="fa fa-angle-right ml-1"></i>
                                    </button>
                                    
                                    <p class="text-gray-600 text-sm mt-4"><i class="fa fa-calendar-o mr-1"></i> 2025年7月12日</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 西安新闻 -->
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                            <div class="flex flex-col md:flex-row">
                                <div class="md:w-1/3">
                                    <img src="https://picsum.photos/seed/xian/600/800" alt="西安城墙" class="w-full h-full object-cover">
                                </div>
                                <div class="md:w-2/3 p-6">
                                    <div class="flex justify-between items-start mb-4">
                                        <h3 class="text-xl font-bold text-gray-800">千年古都焕发新活力</h3>
                                        <span class="bg-primary/10 text-primary text-sm px-3 py-1 rounded-full">陕西西安</span>
                                    </div>
                                    
                                    <div class="news-content-short mb-4" id="news-content-zh-5">
                                        <p>西安，这座有着3100多年建城史、1100多年建都史的千年古都，近年来通过一系列文化遗产保护和城市更新措施，正焕发出新的活力。</p>
                                        <p>从明城墙的全面修缮到兵马俑的科技保护，从大唐不夜城的打造到小雁塔历史文化片区的改造，西安在保护历史文化遗产的同时，也在不断探索如何让古老的文化与现代生活相融合。如今，西安不仅是中国重要的历史文化名城，也是一座充满活力的现代化城市。夜晚的大唐不夜城，灯火辉煌，游人如织，成为了西安的新地标。西安的成功经验，为其他历史文化名城的保护和发展提供了有益借鉴。</p>
                                    </div>
                                    
                                    <button class="text-primary hover:text-secondary transition-colors text-sm mt-2 read-more-btn" data-id="zh-5">
                                        查看原文 <i class="fa fa-angle-right ml-1"></i>
                                    </button>
                                    
                                    <p class="text-gray-600 text-sm mt-4"><i class="fa fa-calendar-o mr-1"></i> 2025年7月12日</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 英文新闻 -->
                <div class="language-news hidden" data-lang="en">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- 正定新闻英文 -->
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                            <div class="flex flex-col md:flex-row">
                                <div class="md:w-1/3">
                                    <img src="https://picsum.photos/seed/zhengding/600/800" alt="Zhengding Ancient City" class="w-full h-full object-cover">
                                </div>
                                <div class="md:w-2/3 p-6">
                                    <div class="flex justify-between items-start mb-4">
                                        <h3 class="text-xl font-bold text-gray-800">Ancient Charm Touches Modern Prosperity</h3>
                                        <span class="bg-primary/10 text-primary text-sm px-3 py-1 rounded-full">Zhengding, Hebei</span>
                                    </div>
                                    
                                    <div class="news-content-short mb-4" id="news-content-en-1">
                                        <p>As the streetlights come on, the ancient city of Zhengding in Hebei becomes livelier: under the illumination of colorful light strips, people either stroll on the city walls, gather in the ancient blocks.</p>
                                        <p>When night falls, Zhengding Ancient City is illuminated by lights, creating a unique night view. The lights on the city walls outline the contours of ancient buildings, while the lanterns in the ancient blocks create a warm atmosphere. Under the Yanghe Tower, a musical fountain attracts many tourists. In recent years, on the basis of protection, Zhengding Ancient City has actively developed tourism. Through light shows and cultural activities, the ancient city walls have new vitality.</p>
                                    </div>
                                    
                                    <button class="text-primary hover:text-secondary transition-colors text-sm mt-2 read-more-btn" data-id="en-1">
                                        Read full article <i class="fa fa-angle-right ml-1"></i>
                                    </button>
                                    
                                    <p class="text-gray-600 text-sm mt-4"><i class="fa fa-calendar-o mr-1"></i> July 12, 2025</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 其他语言新闻结构与中文保持一致，此处省略重复内容 -->
                    </div>
                </div>
            </div>
        </section>

        <!-- 可视化部分（修复后） -->
        <section id="visualization" class="scroll-mt-20">
            <div class="text-center mb-8">
                <h2 class="text-[clamp(1.8rem,3vw,2.5rem)] font-bold text-primary mb-2">数据可视化</h2>
                <p class="text-gray-600">B站热门视频数据分析</p>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <!-- 点赞数与分享数图表 -->
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                    <h3 class="text-xl font-bold mb-4">视频互动数据TOP5</h3>
                    <!-- 确保容器有明确尺寸 -->
                    <div class="w-full h-[400px]" id="interactionChart"></div>
                </div>

                <!-- 播放量图表 -->
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                    <h3 class="text-xl font-bold mb-4">视频播放量占比</h3>
                    <div class="w-full h-[400px]" id="viewChart"></div>
                </div>
            </div>

            <!-- 弹幕词云（替换为图片展示） -->
            <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                <h3 class="text-xl font-bold mb-4">弹幕词云分析</h3>
                <div class="w-full h-[450px] md:h-[500px] relative overflow-hidden rounded-lg group cursor-pointer">
                    <!-- 图片容器，使用flex居中 -->
                    <div class="flex items-center justify-center w-full h-full bg-gray-100">
                        <img src="q.png" alt="弹幕词云分析" 
                             class="max-w-full max-h-full object-contain transition-transform duration-500 group-hover:scale-105"
                             loading="lazy">
                    </div>
                    <!-- 悬停覆盖层 -->
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-6">
                        <p class="text-white text-lg font-medium">点击查看大图</p>
                    </div>
                </div>
            </div>
            
            <!-- 大图查看模态框 -->
            <div id="imageModal" class="fixed inset-0 bg-black/90 z-50 hidden flex items-center justify-center p-4">
                <div class="relative w-full max-w-5xl">
                    <button id="closeModal" class="absolute -top-12 right-0 text-white text-3xl hover:text-gray-300 transition-colors">
                        <i class="fa fa-times"></i>
                    </button>
                    <img id="modalImage" src="q.png" alt="弹幕词云分析" class="w-full h-auto max-h-[85vh] object-contain">
                </div>
            </div>
        </section>
    </main>
            

    <!-- 页脚 -->
    <footer class="bg-primary text-white py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">文化遗产与数据</h3>
                    <p>探索中国历史文化名城的保护与新生，通过数据可视化展现文化遗产的魅力。</p>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">快速链接</h3>
                    <ul class="space-y-2">
                        <li><a href="#story" class="hover:text-secondary transition-colors">故事</a></li>
                        <li><a href="#news" class="hover:text-secondary transition-colors">古城新闻</a></li>
                        <li><a href="#visualization" class="hover:text-secondary transition-colors">数据可视化</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">联系我们</h3>
                    <ul class="space-y-2">
                        <li><i class="fa fa-envelope-o mr-2"></i> contact@example.com</li>
                        <li><i class="fa fa-phone mr-2"></i> +86 123 4567 8901</li>
                        <li><i class="fa fa-map-marker mr-2"></i> 北京市朝阳区文化大厦</li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-white/20 mt-8 pt-8 text-center">
                <p>&copy; 2025 文化遗产与数据. 保留所有权利.</p>
            </div>
        </div>
    </footer>

    <script>
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 语言切换功能
            const languageTabs = document.querySelectorAll('.language-tabs button');
            const languageNews = document.querySelectorAll('.language-news');
            
            languageTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    
                    // 更新标签样式
                    languageTabs.forEach(t => {
                        t.classList.remove('text-primary', 'border-b-2', 'border-primary');
                        t.classList.add('text-gray-500');
                    });
                    this.classList.add('text-primary', 'border-b-2', 'border-primary');
                    this.classList.remove('text-gray-500');
                    
                    // 显示对应语言的新闻
                    languageNews.forEach(news => {
                        if (news.getAttribute('data-lang') === lang) {
                            news.classList.remove('hidden');
                            news.classList.add('active');
                        } else {
                            news.classList.add('hidden');
                            news.classList.remove('active');
                        }
                    });
                });
            });
            
            // 新闻阅读更多功能
            const readMoreBtns = document.querySelectorAll('.read-more-btn');
            
            readMoreBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const newsId = this.getAttribute('data-id');
                    const newsContent = document.getElementById(`news-content-${newsId}`);
                    
                    if (newsContent.classList.contains('news-content-short')) {
                        newsContent.classList.remove('news-content-short');
                        newsContent.classList.add('news-content-full');
                        this.innerHTML = '收起内容 <i class="fa fa-angle-up ml-1"></i>';
                    } else {
                        newsContent.classList.add('news-content-short');
                        newsContent.classList.remove('news-content-full');
                        this.innerHTML = '查看原文 <i class="fa fa-angle-right ml-1"></i>';
                    }
                });
            });
            
            // 初始化图表（修复后）
            initCharts();
            
            // 平滑滚动
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80, // 考虑导航栏高度
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });

        // 初始化图表（确保100%可运行）
        function initCharts() {
            // 检查ECharts是否加载成功
            if (typeof echarts === 'undefined') {
                console.error('ECharts未加载，请检查CDN链接');
                return;
            }

            // 互动数据图表（点赞数与分享数）
            const interactionDom = document.getElementById('interactionChart');
            if (interactionDom) {
                const interactionChart = echarts.init(interactionDom);
                interactionChart.setOption({
                    tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },
                    legend: { data: ['点赞数', '分享数'], top: 10 },
                    grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                    xAxis: { type: 'category', data: ['视频1', '视频2', '视频3', '视频4', '视频5'] },
                    yAxis: { type: 'value' },
                    series: [
                        {
                            name: '点赞数',
                            type: 'bar',
                            data: [610251, 508095, 471513, 421863, 380521],
                            itemStyle: { color: '#8B5CF6' }
                        },
                        {
                            name: '分享数',
                            type: 'bar',
                            data: [83453, 52930, 50216, 41614, 30438],
                            itemStyle: { color: '#EC4899' }
                        }
                    ]
                });
                // 监听窗口大小变化
                window.addEventListener('resize', () => interactionChart.resize());
            }

            // 播放量图表
            const viewDom = document.getElementById('viewChart');
            if (viewDom) {
                const viewChart = echarts.init(viewDom);
                viewChart.setOption({
                    tooltip: { trigger: 'item' },
                    legend: { top: '5%', left: 'center' },
                    series: [
                        {
                            name: '播放量占比',
                            type: 'pie',
                            radius: ['40%', '70%'],
                            avoidLabelOverlap: false,
                            itemStyle: {
                                borderRadius: 10,
                                borderColor: '#fff',
                                borderWidth: 2
                            },
                            label: { show: false, position: 'center' },
                            emphasis: {
                                label: { show: true, fontSize: 16, fontWeight: 'bold' }
                            },
                            labelLine: { show: false },
                            data: [
                                { value: 23.5, name: '【罗翔】先性侵然后谈恋爱还叫不叫性侵?' },
                                { value: 20.3, name: '父母打架而已,我吃个瓜' },
                                { value: 19.6, name: '从小被家暴的少年...' },
                                { value: 17.0, name: '我被家暴了,这次我不再沉默' },
                                { value: 19.6, name: '其他热门视频' }
                            ]
                        }
                    ]
                });
                window.addEventListener('resize', () => viewChart.resize());
            }

            // 弹幕词云已替换为图片，无需初始化
        }
    </script>

    <script>
        // 获取DOM元素
        const wordcloudImageContainer = document.getElementById('wordcloudImageContainer');
        const imageModal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const closeModal = document.getElementById('closeModal');
    
        // 点击图片容器时显示模态框
        wordcloudImageContainer.addEventListener('click', () => {
            // 获取原图src
            const imageSrc = document.getElementById('wordcloudImage').src;
            // 设置模态框图片src
            modalImage.src = imageSrc;
            // 显示模态框
            imageModal.classList.remove('hidden');
            imageModal.classList.add('flex');
            // 禁止背景滚动
            document.body.style.overflow = 'hidden';
        });
    
        // 点击关闭按钮时隐藏模态框
        closeModal.addEventListener('click', () => {
            imageModal.classList.add('hidden');
            imageModal.classList.remove('flex');
            // 恢复背景滚动
            document.body.style.overflow = '';
        });
    
        // 点击模态框背景时隐藏模态框
        imageModal.addEventListener('click', (e) => {
            if (e.target === imageModal) {
                imageModal.classList.add('hidden');
                imageModal.classList.remove('flex');
                document.body.style.overflow = '';
            }
        });
    
        // 键盘ESC键关闭模态框
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !imageModal.classList.contains('hidden')) {
                imageModal.classList.add('hidden');
                imageModal.classList.remove('flex');
                document.body.style.overflow = '';
            }
        });
    </script>
    
</body>
</html>
    
